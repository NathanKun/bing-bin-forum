<ion-content padding id='bbcercle'>
  <br>
  <ion-row>
    <ion-col col-1>
      <ion-icon class='arrow' name="arrow-back" (click)="openPublicationPage()"></ion-icon>
    </ion-col>

    <ion-col col-10>
      <h1 text-center text-sm-ceter text-md-center text-lg-center>BB CERCLE</h1>
    </ion-col>

    <ion-col col-1>
      <ion-icon class='arrow' name="arrow-forward" (click)="openCollectionPage()"></ion-icon>
    </ion-col>
  </ion-row>

  <ion-card #threadcard *ngFor="let thread of threads">

    <ion-card-content class='card-head'>
      <img *ngIf="thread.category_id==2" class='etiquette' alt="flag" src="assets/imgs/etiquette-green-full.png" />
      <img *ngIf="thread.category_id==3" class='etiquette' alt="flag" src="assets/imgs/etiquette-red-full.png" />
      <img *ngIf="thread.category_id==4" class='etiquette' alt="flag" src="assets/imgs/etiquette-brown-full.png" />

      <ion-row class='head'>
        <ion-col col-2>
          <canvas [id]="'thread-canvas-' + thread.id"></canvas>
        </ion-col>
        <ion-col col-9 text-left>
          <h2>{{ thread.author.firstname }}</h2>
          <b>Compi√®gne</b>
        </ion-col>
        <ion-col col-1>
          <ion-icon name="more" (click)="presentPopover($event)" color="dark"></ion-icon>
        </ion-col>
      </ion-row>
    </ion-card-content>

    <ion-card-content class='card-content' (click)="openPostPage()">
      <p>{{ thread.content }}</p>
    </ion-card-content>

    <img *ngIf="thread.main_image" [src]="thread.main_image.original.url" class='post-image' (click)="openPostPage()" />

    <ion-row class='foot'>
      <ion-col col-6 text-left>
        <ion-icon name="star-outline" color="backgroundWhite"></ion-icon>
        <b class='time'>{{ thread.timeSince }}</b>
      </ion-col>
      <ion-col col-6 text-right>
        <ion-icon [name]="visible1? 'star' : 'star-outline'" (click)="toggleCollection()" class='collection'></ion-icon>
        <b>{{ thread.favorite_count }}</b>
        <ion-icon [name]="visible2? 'heart' : 'heart-outline'" (click)="toggleLike()" class='like'></ion-icon>
        <b>{{ thread.like_count }}</b>
        <ion-icon [name]="visible3? 'square' : 'square-outline'" (click)="toggleComment()" class='comment'></ion-icon>
      </ion-col>
    </ion-row>

  </ion-card>




  <ion-fab right bottom #fab>
    <button ion-fab color="primary"><ion-icon name="add"></ion-icon></button>
    <ion-fab-list side="top">
      <button ion-fab color="backgroundWhite" (click)="openSearchPage()"><ion-icon name="search" color = "primary"></ion-icon></button>
      <button ion-fab color="backgroundWhite" (click)="openNewPostPage()"><ion-icon name="add"  color = "primary"></ion-icon></button>
    </ion-fab-list>
  </ion-fab>

</ion-content>
